repos:
  - repo: local
    hooks:
      - id: build
        name: Build TypeScript
        entry: npm run build
        language: system
        pass_filenames: false
        stages: [commit]
        always_run: true

      - id: format
        name: Format with Prettier
        entry: npm run format
        language: system
        pass_filenames: false
        stages: [commit]
        always_run: true

      - id: lint-md
        name: Lint Markdown
        entry: npm run lint:md
        language: system
        pass_filenames: false
        stages: [commit]
        always_run: true

      - id: lint-js
        name: Lint JavaScript
        entry: npm run lint:js
        language: system
        pass_filenames: false
        stages: [commit]
        always_run: true

      - id: knip
        name: Check unused dependencies
        entry: npm run knip
        language: system
        pass_filenames: false
        stages: [commit]
        always_run: true

      - id: audit
        name: Security audit
        entry: npm audit --audit-level=high
        language: system
        pass_filenames: false
        stages: [commit]
        always_run: true

      - id: test-with-coverage
        name: Check test coverage
        entry: npm run test:coverage
        language: system
        pass_filenames: false
        stages: [commit]
        always_run: true

      - id: coverage-check
        name: Validate coverage baseline
        entry: node scripts/precommit-coverage.js
        language: system
        pass_filenames: false
        stages: [commit]
        always_run: true
